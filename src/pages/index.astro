---
import AboutSection from "@/components/Pages/Home/Sections/AboutSection.astro";
import ConditionSection from "@/components/Pages/Home/Sections/ConditionSection.astro";
import FAQ from "@/components/Pages/Home/Sections/FAQ.astro";
import FormSection from "@/components/Pages/Home/Sections/FormSection.astro";
import HeroSection from "@/components/Pages/Home/Sections/HeroSection.astro";
import MapSection from "@/components/Pages/Home/Sections/MapSection.astro";
import PopularAuto from "@/components/Pages/Home/Sections/PopularAuto.astro";
import RentFlowSection from "@/components/Pages/Home/Sections/RentFlowSection.astro";
import Services from "@/components/Pages/Home/Sections/Services.astro";
import BaseLayout from "@/layouts/BaseLayout.astro";
import { wpFetch } from "@/lib/wp";

const data = await wpFetch(`/acf/v3/pages/48`);
const { acf: pageDdata } = data;
const {
  status,
  about_us,
  for_rent,
  recomendation_auto,
  hero_block,
  seo,
  faq,
  services,
  form_section,
} = pageDdata;
const {
  seo_title: title,
  keywords,
  short_description: description,
  seo_image: image,
} = seo;
const ymd = new Date().toISOString().split("T")[0];

const jsonLd = [
  {
    "@context": "https://schema.org",
    "@type": "Organization",
    headline: title,
    datePublished: ymd,
    dateModified: ymd,
    inLanguage: "ru",
    description: description,
    mainEntityOfPage: { "@type": "WebPage", "@id": "https://car1.by" },
    image: image,
    email: "car1prokat@gmail.com",
    contactPoint: {
      "@type": "ContactPoint",
      telephone: "+375 25 780-88-08",
      contactType: "customer service",
      areaServed: "BY",
      availableLanguage: ["Russian", "English"],
    },
    address: {
      "@type": "PostalAddress",
      addressLocality: "Брест",
      addressCountry: "BY",
      streetAddress: "ул. Шоссейная, 16, офис 202",
    },
    aggregateRating: {
      "@type": "AggregateRating",
      ratingValue: "5.0",
      reviewCount: "276",
    },
    sameAs: [
      "https://api.whatsapp.com/send/?phone=375257808808",
      "https://t.me/Car4_brest",
      "https://www.instagram.com/car4.by/",
    ],
  },
  {
    "@context": "https://schema.org",
    "@type": "WebSite",
    name: "Car1.by — Прокат авто в Бресте",
    url: "https://car1.by/",
  },
  {
    "@context": "https://schema.org",
    "@type": "BreadcrumbList",
    itemListElement: [
      {
        "@type": "ListItem",
        position: 1,
        name: "Главная",
        item: "https://car1.by/",
      },
      {
        "@type": "ListItem",
        position: 2,
        name: "Автопарк",
        item: "https://car1.by/cars/",
      },
      {
        "@type": "ListItem",
        position: 3,
        name: "Тарифы",
        item: "https://car1.by/tarifs/",
      },
      {
        "@type": "ListItem",
        position: 4,
        name: "Условия аренды",
        item: "https://car1.by/conditions/",
      },
      {
        "@type": "ListItem",
        position: 5,
        name: "Новости",
        item: "https://car1.by/blog/",
      },
    ],
  },
];
---

<BaseLayout {title} {keywords} {jsonLd} {description} {image}>
  <HeroSection {hero_block} {image} />
  <PopularAuto fields={recomendation_auto} />
  <AboutSection {status} {about_us} />
  <RentFlowSection fields={for_rent} />
  <ConditionSection />
  <FormSection fields={form_section} />
  <Services fields={services} />
  <MapSection />
  <FAQ fields={faq} />
</BaseLayout>
